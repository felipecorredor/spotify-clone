import{j as f,u as B,V as he,b as ve,P as xe,a as Se}from"./PlayerStore.ga6ffD9W.js";import{r,$ as R}from"./index.X7CYY8-C.js";import"./index.2dlj54Lr.js";const be=({song:e})=>{const t=e?.artists.join(", ");return f.jsxs("div",{className:"flex items-center gap-5 relative overflow-hidden",children:[f.jsx("picture",{className:"w-16 h-16 bg-zinc-800 rounded-md shadow-lg overflow-hidden",children:f.jsx("img",{src:e?.image,alt:e?.title})}),f.jsxs("div",{className:"flex flex-col",children:[f.jsx("h3",{className:"font-bold block",children:e?.title}),f.jsx("span",{className:"text-xs text-gray-400",children:t})]})]})};function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},E.apply(this,arguments)}function J(e,[t,n]){return Math.min(n,Math.max(t,e))}function j(e,t,{checkForDefaultPrevented:n=!0}={}){return function(c){if(e?.(c),n===!1||!c.defaultPrevented)return t?.(c)}}function ge(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Q(...e){return t=>e.forEach(n=>ge(n,t))}function M(...e){return r.useCallback(Q(...e),e)}function ee(e,t=[]){let n=[];function o(s,i){const a=r.createContext(i),u=n.length;n=[...n,i];function d(l){const{scope:m,children:v,...p}=l,h=m?.[e][u]||a,$=r.useMemo(()=>p,Object.values(p));return r.createElement(h.Provider,{value:$},v)}function S(l,m){const v=m?.[e][u]||a,p=r.useContext(v);if(p)return p;if(i!==void 0)return i;throw new Error(`\`${l}\` must be used within \`${s}\``)}return d.displayName=s+"Provider",[d,S]}const c=()=>{const s=n.map(i=>r.createContext(i));return function(a){const u=a?.[e]||s;return r.useMemo(()=>({[`__scope${e}`]:{...a,[e]:u}}),[a,u])}};return c.scopeName=e,[o,we(c,...t)]}function we(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const o=e.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(s){const i=o.reduce((a,{useScope:u,scopeName:d})=>{const l=u(s)[`__scope${d}`];return{...a,...l}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function te(e){const t=r.useRef(e);return r.useEffect(()=>{t.current=e}),r.useMemo(()=>(...n)=>{var o;return(o=t.current)===null||o===void 0?void 0:o.call(t,...n)},[])}function ye({prop:e,defaultProp:t,onChange:n=()=>{}}){const[o,c]=Ee({defaultProp:t,onChange:n}),s=e!==void 0,i=s?e:o,a=te(n),u=r.useCallback(d=>{if(s){const l=typeof d=="function"?d(e):d;l!==e&&a(l)}else c(d)},[s,e,c,a]);return[i,u]}function Ee({defaultProp:e,onChange:t}){const n=r.useState(e),[o]=n,c=r.useRef(o),s=te(t);return r.useEffect(()=>{c.current!==o&&(s(o),c.current=o)},[o,c,s]),n}const Ce=r.createContext(void 0);function Pe(e){const t=r.useContext(Ce);return e||t||"ltr"}function Re(e){const t=r.useRef({value:e,previous:e});return r.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}const Me=globalThis?.document?r.useLayoutEffect:()=>{};function _e(e){const[t,n]=r.useState(void 0);return Me(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const o=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const s=c[0];let i,a;if("borderBoxSize"in s){const u=s.borderBoxSize,d=Array.isArray(u)?u[0]:u;i=d.inlineSize,a=d.blockSize}else i=e.offsetWidth,a=e.offsetHeight;n({width:i,height:a})});return o.observe(e,{box:"border-box"}),()=>o.unobserve(e)}else n(void 0)},[e]),t}const K=r.forwardRef((e,t)=>{const{children:n,...o}=e,c=r.Children.toArray(n),s=c.find(Ne);if(s){const i=s.props.children,a=c.map(u=>u===s?r.Children.count(i)>1?r.Children.only(null):r.isValidElement(i)?i.props.children:null:u);return r.createElement(L,E({},o,{ref:t}),r.isValidElement(i)?r.cloneElement(i,void 0,a):null)}return r.createElement(L,E({},o,{ref:t}),n)});K.displayName="Slot";const L=r.forwardRef((e,t)=>{const{children:n,...o}=e;return r.isValidElement(n)?r.cloneElement(n,{...je(o,n.props),ref:t?Q(t,n.ref):n.ref}):r.Children.count(n)>1?r.Children.only(null):null});L.displayName="SlotClone";const De=({children:e})=>r.createElement(r.Fragment,null,e);function Ne(e){return r.isValidElement(e)&&e.type===De}function je(e,t){const n={...t};for(const o in t){const c=e[o],s=t[o];/^on[A-Z]/.test(o)?c&&s?n[o]=(...a)=>{s(...a),c(...a)}:c&&(n[o]=c):o==="style"?n[o]={...c,...s}:o==="className"&&(n[o]=[c,s].filter(Boolean).join(" "))}return{...e,...n}}const Ve=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],k=Ve.reduce((e,t)=>{const n=r.forwardRef((o,c)=>{const{asChild:s,...i}=o,a=s?K:t;return r.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),r.createElement(a,E({},i,{ref:c}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Ae(e){const t=e+"CollectionProvider",[n,o]=ee(t),[c,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=v=>{const{scope:p,children:h}=v,$=R.useRef(null),b=R.useRef(new Map).current;return R.createElement(c,{scope:p,itemMap:b,collectionRef:$},h)},a=e+"CollectionSlot",u=R.forwardRef((v,p)=>{const{scope:h,children:$}=v,b=s(a,h),y=M(p,b.collectionRef);return R.createElement(K,{ref:y},$)}),d=e+"CollectionItemSlot",S="data-radix-collection-item",l=R.forwardRef((v,p)=>{const{scope:h,children:$,...b}=v,y=R.useRef(null),x=M(p,y),w=s(d,h);return R.useEffect(()=>(w.itemMap.set(y,{ref:y,...b}),()=>void w.itemMap.delete(y))),R.createElement(K,{[S]:"",ref:x},$)});function m(v){const p=s(e+"CollectionConsumer",v);return R.useCallback(()=>{const $=p.collectionRef.current;if(!$)return[];const b=Array.from($.querySelectorAll(`[${S}]`));return Array.from(p.itemMap.values()).sort((w,_)=>b.indexOf(w.ref.current)-b.indexOf(_.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:i,Slot:u,ItemSlot:l},m,o]}const ne=["PageUp","PageDown"],oe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],re={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},I="Slider",[H,Ie,Te]=Ae(I),[se,ut]=ee(I,[Te]),[Ke,O]=se(I),ke=r.forwardRef((e,t)=>{const{name:n,min:o=0,max:c=100,step:s=1,orientation:i="horizontal",disabled:a=!1,minStepsBetweenThumbs:u=0,defaultValue:d=[o],value:S,onValueChange:l=()=>{},onValueCommit:m=()=>{},inverted:v=!1,...p}=e,[h,$]=r.useState(null),b=M(t,g=>$(g)),y=r.useRef(new Set),x=r.useRef(0),w=i==="horizontal",_=h?!!h.closest("form"):!0,Y=w?Oe:ze,[C=[],fe]=ye({prop:S,defaultProp:d,onChange:g=>{var P;(P=[...y.current][x.current])===null||P===void 0||P.focus(),l(g)}}),W=r.useRef(C);function me(g){const P=Ge(C,g);V(g,P)}function pe(g){V(g,x.current)}function $e(){const g=W.current[x.current];C[x.current]!==g&&m(C)}function V(g,P,{commit:T}={commit:!1}){const X=Qe(s),z=et(Math.round((g-o)/s)*s+o,X),A=J(z,[o,c]);fe((N=[])=>{const D=We(N,A,P);if(Je(D,u*s)){x.current=D.indexOf(A);const G=String(D)!==String(N);return G&&T&&m(D),G?D:N}else return N})}return r.createElement(Ke,{scope:e.__scopeSlider,disabled:a,min:o,max:c,valueIndexToChangeRef:x,thumbs:y.current,values:C,orientation:i},r.createElement(H.Provider,{scope:e.__scopeSlider},r.createElement(H.Slot,{scope:e.__scopeSlider},r.createElement(Y,E({"aria-disabled":a,"data-disabled":a?"":void 0},p,{ref:b,onPointerDown:j(p.onPointerDown,()=>{a||(W.current=C)}),min:o,max:c,inverted:v,onSlideStart:a?void 0:me,onSlideMove:a?void 0:pe,onSlideEnd:a?void 0:$e,onHomeKeyDown:()=>!a&&V(o,0,{commit:!0}),onEndKeyDown:()=>!a&&V(c,C.length-1,{commit:!0}),onStepKeyDown:({event:g,direction:P})=>{if(!a){const z=ne.includes(g.key)||g.shiftKey&&oe.includes(g.key)?10:1,A=x.current,N=C[A],D=s*z*P;V(N+D,A,{commit:!0})}}})))),_&&C.map((g,P)=>r.createElement(Ye,{key:P,name:n?n+(C.length>1?"[]":""):void 0,value:g})))}),[ce,ae]=se(I,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Oe=r.forwardRef((e,t)=>{const{min:n,max:o,dir:c,inverted:s,onSlideStart:i,onSlideMove:a,onSlideEnd:u,onStepKeyDown:d,...S}=e,[l,m]=r.useState(null),v=M(t,x=>m(x)),p=r.useRef(),h=Pe(c),$=h==="ltr",b=$&&!s||!$&&s;function y(x){const w=p.current||l.getBoundingClientRect(),_=[0,w.width],C=U(_,b?[n,o]:[o,n]);return p.current=w,C(x-w.left)}return r.createElement(ce,{scope:e.__scopeSlider,startEdge:b?"left":"right",endEdge:b?"right":"left",direction:b?1:-1,size:"width"},r.createElement(ie,E({dir:h,"data-orientation":"horizontal"},S,{ref:v,style:{...S.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:x=>{const w=y(x.clientX);i?.(w)},onSlideMove:x=>{const w=y(x.clientX);a?.(w)},onSlideEnd:()=>{p.current=void 0,u?.()},onStepKeyDown:x=>{const _=re[b?"from-left":"from-right"].includes(x.key);d?.({event:x,direction:_?-1:1})}})))}),ze=r.forwardRef((e,t)=>{const{min:n,max:o,inverted:c,onSlideStart:s,onSlideMove:i,onSlideEnd:a,onStepKeyDown:u,...d}=e,S=r.useRef(null),l=M(t,S),m=r.useRef(),v=!c;function p(h){const $=m.current||S.current.getBoundingClientRect(),b=[0,$.height],x=U(b,v?[o,n]:[n,o]);return m.current=$,x(h-$.top)}return r.createElement(ce,{scope:e.__scopeSlider,startEdge:v?"bottom":"top",endEdge:v?"top":"bottom",size:"height",direction:v?1:-1},r.createElement(ie,E({"data-orientation":"vertical"},d,{ref:l,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:h=>{const $=p(h.clientY);s?.($)},onSlideMove:h=>{const $=p(h.clientY);i?.($)},onSlideEnd:()=>{m.current=void 0,a?.()},onStepKeyDown:h=>{const b=re[v?"from-bottom":"from-top"].includes(h.key);u?.({event:h,direction:b?-1:1})}})))}),ie=r.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:o,onSlideMove:c,onSlideEnd:s,onHomeKeyDown:i,onEndKeyDown:a,onStepKeyDown:u,...d}=e,S=O(I,n);return r.createElement(k.span,E({},d,{ref:t,onKeyDown:j(e.onKeyDown,l=>{l.key==="Home"?(i(l),l.preventDefault()):l.key==="End"?(a(l),l.preventDefault()):ne.concat(oe).includes(l.key)&&(u(l),l.preventDefault())}),onPointerDown:j(e.onPointerDown,l=>{const m=l.target;m.setPointerCapture(l.pointerId),l.preventDefault(),S.thumbs.has(m)?m.focus():o(l)}),onPointerMove:j(e.onPointerMove,l=>{l.target.hasPointerCapture(l.pointerId)&&c(l)}),onPointerUp:j(e.onPointerUp,l=>{const m=l.target;m.hasPointerCapture(l.pointerId)&&(m.releasePointerCapture(l.pointerId),s(l))})}))}),Be="SliderTrack",Le=r.forwardRef((e,t)=>{const{__scopeSlider:n,...o}=e,c=O(Be,n);return r.createElement(k.span,E({"data-disabled":c.disabled?"":void 0,"data-orientation":c.orientation},o,{ref:t}))}),q="SliderRange",He=r.forwardRef((e,t)=>{const{__scopeSlider:n,...o}=e,c=O(q,n),s=ae(q,n),i=r.useRef(null),a=M(t,i),u=c.values.length,d=c.values.map(m=>le(m,c.min,c.max)),S=u>1?Math.min(...d):0,l=100-Math.max(...d);return r.createElement(k.span,E({"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0},o,{ref:a,style:{...e.style,[s.startEdge]:S+"%",[s.endEdge]:l+"%"}}))}),Z="SliderThumb",Ue=r.forwardRef((e,t)=>{const n=Ie(e.__scopeSlider),[o,c]=r.useState(null),s=M(t,a=>c(a)),i=r.useMemo(()=>o?n().findIndex(a=>a.ref.current===o):-1,[n,o]);return r.createElement(Fe,E({},e,{ref:s,index:i}))}),Fe=r.forwardRef((e,t)=>{const{__scopeSlider:n,index:o,...c}=e,s=O(Z,n),i=ae(Z,n),[a,u]=r.useState(null),d=M(t,$=>u($)),S=_e(a),l=s.values[o],m=l===void 0?0:le(l,s.min,s.max),v=Xe(o,s.values.length),p=S?.[i.size],h=p?qe(p,m,i.direction):0;return r.useEffect(()=>{if(a)return s.thumbs.add(a),()=>{s.thumbs.delete(a)}},[a,s.thumbs]),r.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[i.startEdge]:`calc(${m}% + ${h}px)`}},r.createElement(H.ItemSlot,{scope:e.__scopeSlider},r.createElement(k.span,E({role:"slider","aria-label":e["aria-label"]||v,"aria-valuemin":s.min,"aria-valuenow":l,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0},c,{ref:d,style:l===void 0?{display:"none"}:e.style,onFocus:j(e.onFocus,()=>{s.valueIndexToChangeRef.current=o})}))))}),Ye=e=>{const{value:t,...n}=e,o=r.useRef(null),c=Re(t);return r.useEffect(()=>{const s=o.current,i=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(i,"value").set;if(c!==t&&u){const d=new Event("input",{bubbles:!0});u.call(s,t),s.dispatchEvent(d)}},[c,t]),r.createElement("input",E({style:{display:"none"}},n,{ref:o,defaultValue:t}))};function We(e=[],t,n){const o=[...e];return o[n]=t,o.sort((c,s)=>c-s)}function le(e,t,n){const s=100/(n-t)*(e-t);return J(s,[0,100])}function Xe(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Ge(e,t){if(e.length===1)return 0;const n=e.map(c=>Math.abs(c-t)),o=Math.min(...n);return n.indexOf(o)}function qe(e,t,n){const o=e/2,s=U([0,50],[0,o]);return(o-s(t)*n)*n}function Ze(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function Je(e,t){if(t>0){const n=Ze(e);return Math.min(...n)>=t}return!0}function U(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const o=(t[1]-t[0])/(e[1]-e[0]);return t[0]+o*(n-e[0])}}function Qe(e){return(String(e).split(".")[1]||"").length}function et(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}const ue=ke,tt=Le,nt=He,ot=Ue;function de(e){var t,n,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(t=0;t<c;t++)e[t]&&(n=de(e[t]))&&(o&&(o+=" "),o+=n)}else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}function rt(){for(var e,t,n=0,o="",c=arguments.length;n<c;n++)(e=arguments[n])&&(t=de(e))&&(o&&(o+=" "),o+=t);return o}const F=r.forwardRef(({className:e,...t},n)=>f.jsxs(ue,{ref:n,className:rt("relative flex touch-none select-none items-center group",e),...t,children:[f.jsx(tt,{className:"relative h-1 w-full grow overflow-hidden rounded-full bg-gray-800",children:f.jsx(nt,{className:"absolute h-full bg-white group-hover:bg-green-400"})}),f.jsx(ot,{className:"hidden group-hover:block h-3 w-3 bg-white rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));F.displayName=ue.displayName;const st=()=>{const e=B(s=>s.volume),t=B(s=>s.setVolume),n=r.useRef(e),o=e<.1,c=()=>{o?t(n.current):(n.current=e,t(0))};return f.jsxs("div",{className:"flex justify-center gap-x-2 text-white",children:[f.jsx("button",{className:"opacity-70 hover:opacity-100 transition",onClick:c,children:o?f.jsx(he,{}):f.jsx(ve,{})}),f.jsx(F,{defaultValue:[100],max:100,min:0,value:[e*100],className:"w-[95px]",onValueChange:s=>{const[i]=s,a=i/100;t(a)}})]})},ct=({audio:e})=>{const[t,n]=r.useState(0);r.useEffect(()=>(e.current&&e.current.addEventListener("timeupdate",o),()=>{e.current&&e.current.removeEventListener("timeupdate",o)}),[]);const o=()=>{e.current&&n(e.current.currentTime)},c=e?.current?.duration??0,s=i=>{if(!i)return"00:00";const a=Math.floor(i%60).toString().padStart(2,"0");return`${Math.floor(i/60)}:${a}`};return f.jsxs("div",{className:"flex gap-x-3 text-xs pt-2",children:[f.jsx("span",{className:"opacity-50 w-12 text-right",children:s(t)}),f.jsx(F,{defaultValue:[0],max:c,min:0,value:[t],className:"w-[600px]",onValueChange:([i])=>{e.current&&(e.current.currentTime=i)}}),f.jsx("span",{className:"opacity-50 w-12",children:c?s(c):"0:00"})]})},dt=()=>{const e=r.useRef(null),{isPlaying:t,setIsPlaying:n,currentMusic:o,volume:c}=B(i=>i);r.useEffect(()=>{t?e.current?.play():e.current?.pause()},[t]),r.useEffect(()=>{e.current&&(e.current.volume=c)},[c]),r.useEffect(()=>{const{song:i,playlist:a}=o;if(i){const u=`/music/${a?.id}/0${i.id}.mp3`;e.current&&(e.current.src=u,e.current.volume=c,e.current.play())}},[o]);const s=()=>{n(!t)};return f.jsxs("div",{className:"flex flex-row justify-between w-full px-1 z-50",children:[f.jsx("div",{className:"",children:f.jsx(be,{song:o.song})}),f.jsx("div",{className:"grid place-content-center gap-4 flex-1",children:f.jsxs("div",{className:"flex flex-col items-center justify-center",children:[f.jsx("div",{className:"flex gap-4",children:f.jsx("button",{className:"bg-white rounded-full p-2",onClick:s,children:t?f.jsx(xe,{}):f.jsx(Se,{})})}),f.jsx(ct,{audio:e}),f.jsx("audio",{ref:e})]})}),f.jsx("div",{className:"grid grid-flow-col place-content-center gap-2",children:f.jsx(st,{})})]})};export{dt as default};
